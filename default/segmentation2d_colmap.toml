[Colmap]
matcher = "exhaustive"
compute_dense = false

[Colmap.cli_args.feature_extractor]
"--ImageReader.single_camera" = "1"
"--SiftExtraction.use_gpu" = "1"

[Colmap.cli_args.exhaustive_matcher]
"--SiftMatching.use_gpu" = "1"

[Colmap.cli_args.model_aligner]
"--robust_alignment_max_error" = "10"

[accessory]
calibration_scan_id = "calib_scan_shortpath"

[Masks]
upstream_task="Scan"
type = "excess_green"
dilation = 5
binarize = true
threshold = 0.0

[Segmentation2D]
upstream_task="Undistorted"
query = '{"channel":"rgb"}'
Sx = 896
Sy = 896
N_vox = 1000000
label_names="background,flower,pedundle,stem,bud,leaf,fruit"
# model_segmentation_name = "Resnet101_896_896_epoch1.pt"
model_segmentation_name = "Resnet101_896_896_epoch51.pt"
directory_images = "/home/twintz/tmp/finetune_images"
directory_weights = "/home/twintz/tmp/finetune_weights"
finetune_epochs = 20

[Reconstruction3D]
N_vox = 1000000

[Voxels]
upstream_mask = "Segmentation2D"
multiclass = true
voxel_size = 2
type = "averaging"
#upstream_colmap = "None"
use_colmap_poses='True'

[PointCloud]
level_set_value = 1.0

[Visualization]
max_image_size = 1500
max_pcd_size = 10000
thumbnail_size = 150
pcd_source = "vox2pcd"
mesh_source = "delaunay"

#[Colmap]
#matcher = "exhaustive"
#compute_dense = false


#[Colmap.cli_args.feature_extractor]
#"--ImageReader.single_camera" = "1"
#"--SiftExtraction.use_gpu" = "1"

#[Colmap.cli_args.exhaustive_matcher]
#"--SiftMatching.use_gpu" = "1"

#[Colmap.cli_args.model_aligner]
#--robust_alignment_max_error = "10"


